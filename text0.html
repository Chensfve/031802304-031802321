<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test</title>
</head>
<body>
    <textarea id="tree" rows="24" cols="60"></textarea>
    <button onClick="trans()">提交</button>
    <script>
        function trans(){
            var data = [];
            var first = [];
            var second = [];
            var third = [];
            var na = [];
            var dat = [];

            var get_data = document.getElementById("tree").value;
            first = get_data.split("\n\n\n");
            for(var i = 0; i < first.length; i++){
                second = first[i].split("\n\n");
                for(var j = 0; j < second.length; j++){
                        third = second[j].split("\n");
                        for(var k = 0; k < third.length; k++){
                            var one = "";
                            var two = "";
                            dat = third[k].split("：");
                            one = dat[0];
                            two = dat[1];
                            if(one == "导师"){
                                data[k]=eval("{name:\""+two+"\",value:\""+String(i)+",sj:\"-\"}");
                            }
                            else{
                                if(j==0){
                                    na[k] = two.split("、");
                                    for(var l = 0;l < na.length; l++){
                                        data[k]=eval("{name:\""+na[k][l]+"\",value:\""+String(i)+String(k)+"\",sj:\""+String(i)+"\"}");
                                    }
                                }
                                else{
                                    for(var k = 0;k < third.length; k++){
                                        for(var l = 0;l < na[k].length; l++){
                                            if(one==na[k][l]){
                                                data[k]=eval("{name:\""+two+"\",value:\""+String(i)+String(k)+String(l)+"\",sj:\""+String(i)+String(k)+String(l)+"\"}");
                                            }
                                        }
                                    }
                                }
                            }
                        }
                }
            }
            console.log(data);
        }
    </script>
    
</body>
</html>